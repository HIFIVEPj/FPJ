<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  												
<mapper namespace="fp.freelancerprofile.mapper.FreelancerMarketInfoMapper">

	<resultMap type="MarketPick" id="resultMarketPick">
		<id property="marketP_num" column="marketP_num" />
			<result property="market_num" column="market_num" />
			<result property="mem_email" column="mem_email" />
		<association property="market" javaType="Market" column ="market_num" >
			<result property="free_code" column="free_code" />
			<result property="cate_num" column="cate_num" />
			<result property="market_price" column="market_price" />
			<result property="market_sub" column="market_sub" />
			<result property="market_cont" column="market_cont" />
			<result property="market_vcnt" column="market_vcnt" />
			<result property="market_fname" column="market_fname" />
			<result property="market_ofname" column="market_ofname" />
			<result property="market_state" column="market_state" />
			<result property="market_pcnt" column="market_pcnt" />
			<result property="option3" column="option3" />
		</association>
	</resultMap>

	<select id="marketPickList" parameterType="hashmap" resultMap="resultMarketPick" >
	<![CDATA[
		select * from (select rownum rnum , aa.* from ( select * from (select * from market_pick where mem_email=#{mem_email})mp left outer join(select * from market) m on mp.market_num = m.market_num order by m.market_num desc ) aa )where rnum>#{start} and rnum<=#{end} 
	]]>
<!-- select * from (select rownum rnum , aa.* from (select * from market_pick where mem_email=#{mem_email} order by marketp_num desc ) aa )where rnum>#{start} and rnum<=#{end} -->
	</select>
	<select id="getTotalMarketPick" parameterType="String" resultType="int">
		select count(*) from market_pick where mem_email=#{mem_email}
	</select>
	
</mapper>